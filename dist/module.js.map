{"mappings":"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","sources":["src/index.ts","src/curl-parser.ts","src/regexp-patterns.ts","src/flags.ts","src/interface.ts"],"sourcesContent":["export * from \"./curl-parser\";\nexport * from \"./interface\";\n","import {URL} from 'url'\nimport {Output, RequestObject, UrlObject} from \"./interface\";\nimport {ARGS_PATTERN, QUOTES_PATTERN, URL_PATTERN} from \"./regexp-patterns\"\nimport {FLAG_IN_KEY, FLAG_VARIANTS, FLAGS} from \"./flags\";\n\nconst split = (str: string): string[] => {\n    if (!str) return [];\n\n    const args = str.match(ARGS_PATTERN);\n    return args?.map((i) => i.trim().replace(QUOTES_PATTERN, \"\")) || [];\n};\n\nconst getUrl = (args: string[]): UrlObject | null => {\n    const foundUrl = args.find((a) => URL_PATTERN.test(a));\n\n    if (foundUrl) {\n        const obj = new URL(foundUrl);\n\n        return {\n            href: obj.href,\n            url: obj.pathname,\n            baseURL: obj.origin,\n            params: Object.fromEntries(obj.searchParams),\n        };\n    }\n\n    return null;\n};\n\nconst getFlagValues = <D>(flag: FLAGS, args: string[]): Partial<RequestObject<D>> => {\n    const result = {}\n    args.forEach((arg, index) => {\n        if (FLAG_VARIANTS[flag].includes(arg)) {\n            const value = args[index + 1]\n            const key = FLAG_IN_KEY?.[flag]?.[0]\n            if (key) {\n                if (!result[key]) result[key] = {}\n                switch (flag) {\n                    case FLAGS.HEADER:\n                        const values = value.split(\": \")\n                        result[key][values[0]] = values[1]\n                        break;\n                    case FLAGS.DATA:\n                        result[key] = JSON.parse(value)\n                        break;\n                    default:\n                        result[key] = value\n                        break;\n                }\n            }\n        }\n    })\n    return result\n}\n\nconst getRequestObject = <D>(args: string[]): RequestObject<D> => {\n    let requestObj: RequestObject<D> = {}\n    for (const flag in FLAGS) {\n        requestObj = {...requestObj, ...getFlagValues<D>(FLAGS[flag], args)}\n    }\n    return requestObj\n}\n\nexport const curlToObject = <D>(curlStr: string): Output<D> => {\n    const args = split(curlStr);\n    const urlObj = getUrl(args);\n    const requestObj = getRequestObject<D>(args)\n\n    return {...urlObj, method: \"GET\", ...requestObj};\n};\n","export const ARGS_PATTERN = /\\s*(?:([^\\s\\\\\\'\\\"]+)|'((?:[^\\'\\\\]|\\\\.)*)'|\"((?:[^\\\"\\\\]|\\\\.)*)\"|(\\\\.?)|(\\S))(\\s|$)?/g;\nexport const URL_PATTERN = /^(ftp|http|https)?:\\/\\/(?:www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}(\\.|:)[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_\\+.~#?&\\/=]*)$/g\nexport const QUOTES_PATTERN = /'/g","export enum FLAGS {\n    UA = 'UA',\n    HEADER = 'HEADER',\n    HEAD = 'HEAD',\n    DATA = 'DATA',\n    USER = 'USER',\n    METHOD = 'METHOD',\n    COOKIE = 'COOKIE',\n    COMPRESSED = 'COMPRESSED',\n}\n\nexport const FLAG_VARIANTS = {\n    [FLAGS.UA]: ['-A', '--user-agent'],\n    [FLAGS.HEADER]: ['-H', '--header'],\n    [FLAGS.HEAD]: ['-I', '--head'],\n    [FLAGS.DATA]: ['-d', '--data', '--data-ascii', '--data-raw'],\n    [FLAGS.USER]: ['-u', '--user'],\n    [FLAGS.METHOD]: ['-X', '--request'],\n    [FLAGS.COOKIE]: ['-b', '--cookie'],\n    [FLAGS.COMPRESSED]: ['--compressed']\n}\n\nexport const FLAG_IN_KEY = {\n    [FLAGS.UA]: ['headers', 'User-Agent'],\n    [FLAGS.HEADER]: ['headers'],\n    [FLAGS.DATA]: ['data'],\n    [FLAGS.USER]: ['auth'],\n    [FLAGS.METHOD]: ['method'],\n    [FLAGS.COOKIE]: ['headers', 'Cookie'],\n}","export type HeaderTitle =\n    | \"User-Agent\"\n    | \"Accept\"\n    | \"Accept-Encoding\"\n    | \"Accept-Language\"\n    | \"Cache-Control\"\n    | \"Connection\"\n    | \"Content-Length\"\n    | \"Content-Type\"\n    | \"Cookie\"\n    | \"Host\"\n    | \"Origin\"\n    | \"Referer\"\n    | \"Upgrade-Insecure-Requests\"\n    | \"X-Requested-With\";\n\nexport type Method =\n    | \"GET\"\n    | \"DELETE\"\n    | \"HEAD\"\n    | \"OPTIONS\"\n    | \"POST\"\n    | \"PUT\"\n    | \"PATCH\"\n    | \"PURGE\"\n    | \"LINK\"\n    | \"UNLINK\";\n\nexport type Headers = Record<HeaderTitle | string, string>;\n\nexport interface ICredentials {\n    username: string;\n    password: string;\n}\n\nexport interface IProxy {\n    host: string;\n    port: number;\n    auth?: {\n        username: string;\n        password: string;\n    };\n    protocol?: string;\n}\n\nexport type UrlObject = {\n    href?: string;\n    url?: string;\n    baseURL?: string;\n    params?: { [k: string]: any };\n};\n\nexport type RequestObject<D> = {\n    method?: Method;\n    headers?: Headers;\n    data?: D;\n    timeout?: number;\n    auth?: ICredentials;\n    proxy?: IProxy | false;\n};\n\nexport type Output<D> = RequestObject<D> & UrlObject;\n"],"names":[],"version":3,"file":"module.js.map"}